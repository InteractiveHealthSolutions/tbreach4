CREATE TABLE `active_list` (`active_list_id` int(11) NOT NULL AUTO_INCREMENT, `active_list_type_id` int(11) NOT NULL, `person_id` int(11) NOT NULL, `concept_id` int(11) NOT NULL, `start_obs_id` int(11) DEFAULT NULL, `stop_obs_id` int(11) DEFAULT NULL, `start_date` datetime NOT NULL, `end_date` datetime DEFAULT NULL, `comments` varchar(255) DEFAULT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`active_list_id`), KEY `user_who_voided_active_list` (`voided_by`), KEY `user_who_created_active_list` (`creator`), KEY `active_list_type_of_active_list` (`active_list_type_id`), KEY `person_of_active_list` (`person_id`), KEY `concept_active_list` (`concept_id`), KEY `start_obs_active_list` (`start_obs_id`), KEY `stop_obs_active_list` (`stop_obs_id`));
CREATE TABLE `active_list_allergy` (`active_list_id` int(11) NOT NULL AUTO_INCREMENT, `allergy_type` varchar(50) DEFAULT NULL, `reaction_concept_id` int(11) DEFAULT NULL, `severity` varchar(50) DEFAULT NULL, PRIMARY KEY (`active_list_id`), KEY `reaction_allergy` (`reaction_concept_id`));
CREATE TABLE `active_list_problem` (`active_list_id` int(11) NOT NULL AUTO_INCREMENT, `status` varchar(50) DEFAULT NULL, `sort_weight` double DEFAULT NULL, PRIMARY KEY (`active_list_id`));
CREATE TABLE `active_list_type` (`active_list_type_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(50) NOT NULL, `description` varchar(255) DEFAULT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`active_list_type_id`), KEY `user_who_retired_active_list_type` (`retired_by`), KEY `user_who_created_active_list_type` (`creator`));
CREATE TABLE `calculation_registration` (`calculation_registration_id` int(11) NOT NULL AUTO_INCREMENT, `token` varchar(255) NOT NULL, `provider_class_name` varchar(512) NOT NULL, `calculation_name` varchar(512) NOT NULL, `configuration` text, `uuid` char(38) NOT NULL, PRIMARY KEY (`calculation_registration_id`), UNIQUE KEY `token` (`token`), UNIQUE KEY `uuid` (`uuid`));
CREATE TABLE `clob_datatype_storage` (`id` int(11) NOT NULL AUTO_INCREMENT, `uuid` char(38) NOT NULL, `value` longtext NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `uuid` (`uuid`), UNIQUE KEY `clob_datatype_storage_uuid_index` (`uuid`));
CREATE TABLE `concept` (`concept_id` int(11) NOT NULL AUTO_INCREMENT, `retired` tinyint(1) NOT NULL DEFAULT '0', `short_name` varchar(255) DEFAULT NULL, `description` text, `form_text` text, `datatype_id` int(11) NOT NULL DEFAULT '0', `class_id` int(11) NOT NULL DEFAULT '0', `is_set` tinyint(1) NOT NULL DEFAULT '0', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `version` varchar(50) DEFAULT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`concept_id`), UNIQUE KEY `concept_uuid_index` (`uuid`), KEY `user_who_changed_concept` (`changed_by`), KEY `concept_classes` (`class_id`), KEY `concept_creator` (`creator`), KEY `concept_datatypes` (`datatype_id`), KEY `user_who_retired_concept` (`retired_by`));
CREATE TABLE `concept_answer` (`concept_answer_id` int(11) NOT NULL AUTO_INCREMENT, `concept_id` int(11) NOT NULL DEFAULT '0', `answer_concept` int(11) DEFAULT NULL, `answer_drug` int(11) DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `sort_weight` double DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`concept_answer_id`), UNIQUE KEY `concept_answer_uuid_index` (`uuid`), KEY `answer` (`answer_concept`), KEY `answers_for_concept` (`concept_id`), KEY `answer_creator` (`creator`), KEY `answer_answer_drug_fk` (`answer_drug`));
CREATE TABLE `concept_class` (`concept_class_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL DEFAULT '', `description` varchar(255) NOT NULL DEFAULT '', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`concept_class_id`), UNIQUE KEY `concept_class_uuid_index` (`uuid`), KEY `concept_class_retired_status` (`retired`), KEY `concept_class_creator` (`creator`), KEY `user_who_retired_concept_class` (`retired_by`));
CREATE TABLE `concept_complex` (`concept_id` int(11) NOT NULL, `handler` varchar(255) DEFAULT NULL, PRIMARY KEY (`concept_id`));
CREATE TABLE `concept_datatype` (`concept_datatype_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL DEFAULT '', `hl7_abbreviation` varchar(3) DEFAULT NULL, `description` varchar(255) NOT NULL DEFAULT '', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`concept_datatype_id`), UNIQUE KEY `concept_datatype_uuid_index` (`uuid`), KEY `concept_datatype_retired_status` (`retired`), KEY `concept_datatype_creator` (`creator`), KEY `user_who_retired_concept_datatype` (`retired_by`));
CREATE TABLE `concept_description` (`concept_description_id` int(11) NOT NULL AUTO_INCREMENT, `concept_id` int(11) NOT NULL DEFAULT '0', `description` text NOT NULL, `locale` varchar(50) NOT NULL DEFAULT '', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`concept_description_id`), UNIQUE KEY `concept_description_uuid_index` (`uuid`), KEY `user_who_changed_description` (`changed_by`), KEY `description_for_concept` (`concept_id`), KEY `user_who_created_description` (`creator`));
CREATE TABLE `concept_map_type` (`concept_map_type_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, `description` varchar(255) DEFAULT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `is_hidden` tinyint(1) NOT NULL DEFAULT '0', `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`concept_map_type_id`), UNIQUE KEY `name` (`name`), UNIQUE KEY `uuid` (`uuid`), KEY `mapped_user_creator_concept_map_type` (`creator`), KEY `mapped_user_changed_concept_map_type` (`changed_by`), KEY `mapped_user_retired_concept_map_type` (`retired_by`));
CREATE TABLE `concept_name` (`concept_name_id` int(11) NOT NULL AUTO_INCREMENT, `concept_id` int(11) DEFAULT NULL, `name` varchar(255) NOT NULL DEFAULT '', `locale` varchar(50) NOT NULL DEFAULT '', `locale_preferred` tinyint(1) DEFAULT '0', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `concept_name_type` varchar(50) DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`concept_name_id`), UNIQUE KEY `concept_name_uuid_index` (`uuid`), KEY `name_of_concept` (`name`), KEY `name_for_concept` (`concept_id`), KEY `user_who_created_name` (`creator`), KEY `user_who_voided_this_name` (`voided_by`));
CREATE TABLE `concept_name_bkp` (`concept_name_id` int(11) NOT NULL DEFAULT '0', `concept_id` int(11) DEFAULT NULL, `name` varchar(255) NOT NULL DEFAULT '', `locale` varchar(50) NOT NULL DEFAULT '', `locale_preferred` tinyint(1) DEFAULT '0', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `concept_name_type` varchar(50) DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL);
CREATE TABLE `concept_name_tag` (`concept_name_tag_id` int(11) NOT NULL AUTO_INCREMENT, `tag` varchar(50) NOT NULL, `description` text NOT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`concept_name_tag_id`), UNIQUE KEY `concept_name_tag_unique_tags` (`tag`), UNIQUE KEY `concept_name_tag_uuid_index` (`uuid`), KEY `user_who_created_name_tag` (`creator`), KEY `user_who_voided_name_tag` (`voided_by`));
CREATE TABLE `concept_name_tag_map` (`concept_name_id` int(11) NOT NULL, `concept_name_tag_id` int(11) NOT NULL, KEY `mapped_concept_name` (`concept_name_id`), KEY `mapped_concept_name_tag` (`concept_name_tag_id`));
CREATE TABLE `concept_numeric` (`concept_id` int(11) NOT NULL DEFAULT '0', `hi_absolute` double DEFAULT NULL, `hi_critical` double DEFAULT NULL, `hi_normal` double DEFAULT NULL, `low_absolute` double DEFAULT NULL, `low_critical` double DEFAULT NULL, `low_normal` double DEFAULT NULL, `units` varchar(50) DEFAULT NULL, `precise` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`concept_id`));
CREATE TABLE `concept_proposal` (`concept_proposal_id` int(11) NOT NULL AUTO_INCREMENT, `concept_id` int(11) DEFAULT NULL, `encounter_id` int(11) DEFAULT NULL, `original_text` varchar(255) NOT NULL DEFAULT '', `final_text` varchar(255) DEFAULT NULL, `obs_id` int(11) DEFAULT NULL, `obs_concept_id` int(11) DEFAULT NULL, `state` varchar(32) NOT NULL DEFAULT 'UNMAPPED', `comments` varchar(255) DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `locale` varchar(50) NOT NULL DEFAULT '', `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`concept_proposal_id`), UNIQUE KEY `concept_proposal_uuid_index` (`uuid`), KEY `user_who_changed_proposal` (`changed_by`), KEY `concept_for_proposal` (`concept_id`), KEY `user_who_created_proposal` (`creator`), KEY `encounter_for_proposal` (`encounter_id`), KEY `proposal_obs_concept_id` (`obs_concept_id`), KEY `proposal_obs_id` (`obs_id`));
CREATE TABLE `concept_proposal_tag_map` (`concept_proposal_id` int(11) NOT NULL, `concept_name_tag_id` int(11) NOT NULL, KEY `mapped_concept_proposal_tag` (`concept_name_tag_id`), KEY `mapped_concept_proposal` (`concept_proposal_id`));
CREATE TABLE `concept_reference_map` (`concept_map_id` int(11) NOT NULL AUTO_INCREMENT, `concept_reference_term_id` int(11) NOT NULL, `concept_map_type_id` int(11) NOT NULL DEFAULT '1', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `concept_id` int(11) NOT NULL DEFAULT '0', `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`concept_map_id`), KEY `map_for_concept` (`concept_id`), KEY `map_creator` (`creator`), KEY `mapped_concept_map_type` (`concept_map_type_id`), KEY `mapped_user_changed_ref_term` (`changed_by`), KEY `mapped_concept_reference_term` (`concept_reference_term_id`));
CREATE TABLE `concept_reference_source` (`concept_source_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(50) NOT NULL DEFAULT '', `description` text NOT NULL, `hl7_code` varchar(50) DEFAULT '', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`concept_source_id`), UNIQUE KEY `concept_source_unique_hl7_codes` (`hl7_code`), KEY `unique_hl7_code` (`hl7_code`), KEY `concept_source_creator` (`creator`), KEY `user_who_retired_concept_source` (`retired_by`));
CREATE TABLE `concept_reference_term` (`concept_reference_term_id` int(11) NOT NULL AUTO_INCREMENT, `concept_source_id` int(11) NOT NULL, `name` varchar(255) DEFAULT NULL, `code` varchar(255) NOT NULL, `version` varchar(255) DEFAULT NULL, `description` varchar(255) DEFAULT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `date_changed` datetime DEFAULT NULL, `changed_by` int(11) DEFAULT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`concept_reference_term_id`), UNIQUE KEY `uuid` (`uuid`), KEY `mapped_user_creator` (`creator`), KEY `mapped_user_changed` (`changed_by`), KEY `mapped_user_retired` (`retired_by`), KEY `mapped_concept_source` (`concept_source_id`));
CREATE TABLE `concept_reference_term_map` (`concept_reference_term_map_id` int(11) NOT NULL AUTO_INCREMENT, `term_a_id` int(11) NOT NULL, `term_b_id` int(11) NOT NULL, `a_is_to_b_id` int(11) NOT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`concept_reference_term_map_id`), UNIQUE KEY `uuid` (`uuid`), KEY `mapped_term_a` (`term_a_id`), KEY `mapped_term_b` (`term_b_id`), KEY `mapped_concept_map_type_ref_term_map` (`a_is_to_b_id`), KEY `mapped_user_creator_ref_term_map` (`creator`), KEY `mapped_user_changed_ref_term_map` (`changed_by`));
CREATE TABLE `concept_set` (`concept_set_id` int(11) NOT NULL AUTO_INCREMENT, `concept_id` int(11) NOT NULL DEFAULT '0', `concept_set` int(11) NOT NULL DEFAULT '0', `sort_weight` double DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`concept_set_id`), UNIQUE KEY `concept_set_uuid_index` (`uuid`), KEY `idx_concept_set_concept` (`concept_id`), KEY `has_a` (`concept_set`), KEY `user_who_created` (`creator`));
CREATE TABLE `concept_set_derived` (`concept_id` int(11) NOT NULL DEFAULT '0', `concept_set` int(11) NOT NULL DEFAULT '0', `sort_weight` double DEFAULT NULL, PRIMARY KEY (`concept_id`,`concept_set`));
CREATE TABLE `concept_state_conversion` (`concept_state_conversion_id` int(11) NOT NULL AUTO_INCREMENT, `concept_id` int(11) DEFAULT '0', `program_workflow_id` int(11) DEFAULT '0', `program_workflow_state_id` int(11) DEFAULT '0', `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`concept_state_conversion_id`), UNIQUE KEY `unique_workflow_concept_in_conversion` (`program_workflow_id`,`concept_id`), UNIQUE KEY `concept_state_conversion_uuid_index` (`uuid`), KEY `concept_triggers_conversion` (`concept_id`), KEY `conversion_to_state` (`program_workflow_state_id`));
CREATE TABLE `concept_stop_word` (`concept_stop_word_id` int(11) NOT NULL AUTO_INCREMENT, `word` varchar(50) NOT NULL, `locale` varchar(20) NOT NULL DEFAULT 'en', `uuid` char(38) NOT NULL, PRIMARY KEY (`concept_stop_word_id`), UNIQUE KEY `Unique_StopWord_Key` (`word`,`locale`));
CREATE TABLE `concept_word` (`concept_word_id` int(11) NOT NULL AUTO_INCREMENT, `concept_id` int(11) NOT NULL DEFAULT '0', `word` varchar(50) NOT NULL DEFAULT '', `locale` varchar(20) NOT NULL DEFAULT '', `concept_name_id` int(11) NOT NULL, `weight` double DEFAULT '1', PRIMARY KEY (`concept_word_id`), KEY `word_in_concept_name` (`word`), KEY `concept_word_concept_idx` (`concept_id`), KEY `concept_word_weight_index` (`weight`), KEY `word_for_name` (`concept_name_id`));
CREATE TABLE `drug` (`drug_id` int(11) NOT NULL AUTO_INCREMENT, `concept_id` int(11) NOT NULL DEFAULT '0', `name` varchar(255) DEFAULT NULL, `combination` tinyint(1) NOT NULL DEFAULT '0', `dosage_form` int(11) DEFAULT NULL, `dose_strength` double DEFAULT NULL, `maximum_daily_dose` double DEFAULT NULL, `minimum_daily_dose` double DEFAULT NULL, `route` int(11) DEFAULT NULL, `units` varchar(50) DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`drug_id`), UNIQUE KEY `drug_uuid_index` (`uuid`), KEY `primary_drug_concept` (`concept_id`), KEY `drug_creator` (`creator`), KEY `drug_changed_by` (`changed_by`), KEY `dosage_form_concept` (`dosage_form`), KEY `drug_retired_by` (`retired_by`), KEY `route_concept` (`route`));
CREATE TABLE `drug_ingredient` (`concept_id` int(11) NOT NULL DEFAULT '0', `ingredient_id` int(11) NOT NULL DEFAULT '0', PRIMARY KEY (`ingredient_id`,`concept_id`), KEY `combination_drug` (`concept_id`));
CREATE TABLE `drug_order` (`order_id` int(11) NOT NULL DEFAULT '0', `drug_inventory_id` int(11) DEFAULT '0', `dose` double DEFAULT NULL, `equivalent_daily_dose` double DEFAULT NULL, `units` varchar(255) DEFAULT NULL, `frequency` varchar(255) DEFAULT NULL, `prn` tinyint(1) NOT NULL DEFAULT '0', `complex` tinyint(1) NOT NULL DEFAULT '0', `quantity` int(11) DEFAULT NULL, PRIMARY KEY (`order_id`), KEY `inventory_item` (`drug_inventory_id`));
CREATE TABLE `encounter` (`encounter_id` int(11) NOT NULL AUTO_INCREMENT, `encounter_type` int(11) NOT NULL, `patient_id` int(11) NOT NULL DEFAULT '0', `location_id` int(11) DEFAULT NULL, `form_id` int(11) DEFAULT NULL, `encounter_datetime` datetime NOT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `visit_id` int(11) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`encounter_id`), UNIQUE KEY `encounter_uuid_index` (`uuid`), KEY `encounter_datetime_idx` (`encounter_datetime`), KEY `encounter_ibfk_1` (`creator`), KEY `encounter_type_id` (`encounter_type`), KEY `encounter_form` (`form_id`), KEY `encounter_location` (`location_id`), KEY `encounter_patient` (`patient_id`), KEY `user_who_voided_encounter` (`voided_by`), KEY `encounter_changed_by` (`changed_by`), KEY `encounter_visit_id_fk` (`visit_id`));
CREATE TABLE `encounter_provider` (`encounter_provider_id` int(11) NOT NULL AUTO_INCREMENT, `encounter_id` int(11) NOT NULL, `provider_id` int(11) NOT NULL, `encounter_role_id` int(11) NOT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `date_voided` datetime DEFAULT NULL, `voided_by` int(11) DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`encounter_provider_id`), UNIQUE KEY `uuid` (`uuid`), KEY `encounter_id_fk` (`encounter_id`), KEY `provider_id_fk` (`provider_id`), KEY `encounter_role_id_fk` (`encounter_role_id`));
CREATE TABLE `encounter_role` (`encounter_role_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, `description` varchar(1024) DEFAULT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`encounter_role_id`), UNIQUE KEY `uuid` (`uuid`), KEY `encounter_role_creator_fk` (`creator`), KEY `encounter_role_changed_by_fk` (`changed_by`), KEY `encounter_role_retired_by_fk` (`retired_by`));
CREATE TABLE `encounter_type` (`encounter_type_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(50) NOT NULL DEFAULT '', `description` text, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`encounter_type_id`), UNIQUE KEY `encounter_type_uuid_index` (`uuid`), KEY `encounter_type_retired_status` (`retired`), KEY `user_who_created_type` (`creator`), KEY `user_who_retired_encounter_type` (`retired_by`));
CREATE TABLE `field` (`field_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL DEFAULT '', `description` text, `field_type` int(11) DEFAULT NULL, `concept_id` int(11) DEFAULT NULL, `table_name` varchar(50) DEFAULT NULL, `attribute_name` varchar(50) DEFAULT NULL, `default_value` text, `select_multiple` tinyint(1) NOT NULL DEFAULT '0', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`field_id`), UNIQUE KEY `field_uuid_index` (`uuid`), KEY `field_retired_status` (`retired`), KEY `user_who_changed_field` (`changed_by`), KEY `concept_for_field` (`concept_id`), KEY `user_who_created_field` (`creator`), KEY `type_of_field` (`field_type`), KEY `user_who_retired_field` (`retired_by`));
CREATE TABLE `field_answer` (`field_id` int(11) NOT NULL DEFAULT '0', `answer_id` int(11) NOT NULL DEFAULT '0', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`field_id`,`answer_id`), UNIQUE KEY `field_answer_uuid_index` (`uuid`), KEY `field_answer_concept` (`answer_id`), KEY `user_who_created_field_answer` (`creator`));
CREATE TABLE `field_type` (`field_type_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(50) DEFAULT NULL, `description` text, `is_set` tinyint(1) NOT NULL DEFAULT '0', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`field_type_id`), UNIQUE KEY `field_type_uuid_index` (`uuid`), KEY `user_who_created_field_type` (`creator`));
CREATE TABLE `form` (`form_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL DEFAULT '', `version` varchar(50) NOT NULL DEFAULT '', `build` int(11) DEFAULT NULL, `published` tinyint(1) NOT NULL DEFAULT '0', `xslt` text, `template` text, `description` text, `encounter_type` int(11) DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retired_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`form_id`), UNIQUE KEY `form_uuid_index` (`uuid`), KEY `form_published_index` (`published`), KEY `form_retired_index` (`retired`), KEY `form_published_and_retired_index` (`published`,`retired`), KEY `user_who_last_changed_form` (`changed_by`), KEY `user_who_created_form` (`creator`), KEY `form_encounter_type` (`encounter_type`), KEY `user_who_retired_form` (`retired_by`));
CREATE TABLE `form_field` (`form_field_id` int(11) NOT NULL AUTO_INCREMENT, `form_id` int(11) NOT NULL DEFAULT '0', `field_id` int(11) NOT NULL DEFAULT '0', `field_number` int(11) DEFAULT NULL, `field_part` varchar(5) DEFAULT NULL, `page_number` int(11) DEFAULT NULL, `parent_form_field` int(11) DEFAULT NULL, `min_occurs` int(11) DEFAULT NULL, `max_occurs` int(11) DEFAULT NULL, `required` tinyint(1) NOT NULL DEFAULT '0', `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `sort_weight` double DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`form_field_id`), UNIQUE KEY `form_field_uuid_index` (`uuid`), KEY `user_who_last_changed_form_field` (`changed_by`), KEY `user_who_created_form_field` (`creator`), KEY `field_within_form` (`field_id`), KEY `form_containing_field` (`form_id`), KEY `form_field_hierarchy` (`parent_form_field`));
CREATE TABLE `form_resource` (`form_resource_id` int(11) NOT NULL AUTO_INCREMENT, `form_id` int(11) NOT NULL, `name` varchar(255) NOT NULL, `value_reference` text NOT NULL, `datatype` varchar(255) DEFAULT NULL, `datatype_config` text, `preferred_handler` varchar(255) DEFAULT NULL, `handler_config` text, `uuid` char(38) NOT NULL, PRIMARY KEY (`form_resource_id`), UNIQUE KEY `uuid` (`uuid`), UNIQUE KEY `unique_form_and_name` (`form_id`,`name`));
CREATE TABLE `global_property` (`property` varchar(255) NOT NULL DEFAULT '', `property_value` text, `description` text, `uuid` char(38) DEFAULT NULL, `datatype` varchar(255) DEFAULT NULL, `datatype_config` text, `preferred_handler` varchar(255) DEFAULT NULL, `handler_config` text, PRIMARY KEY (`property`), UNIQUE KEY `global_property_uuid_index` (`uuid`));
CREATE TABLE `hl7_in_archive` (`hl7_in_archive_id` int(11) NOT NULL AUTO_INCREMENT, `hl7_source` int(11) NOT NULL DEFAULT '0', `hl7_source_key` varchar(255) DEFAULT NULL, `hl7_data` text NOT NULL, `date_created` datetime NOT NULL, `message_state` int(11) DEFAULT '2', `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`hl7_in_archive_id`), UNIQUE KEY `hl7_in_archive_uuid_index` (`uuid`), KEY `hl7_in_archive_message_state_idx` (`message_state`));
CREATE TABLE `hl7_in_error` (`hl7_in_error_id` int(11) NOT NULL AUTO_INCREMENT, `hl7_source` int(11) NOT NULL DEFAULT '0', `hl7_source_key` text, `hl7_data` text NOT NULL, `error` varchar(255) NOT NULL DEFAULT '', `error_details` mediumtext, `date_created` datetime NOT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`hl7_in_error_id`), UNIQUE KEY `hl7_in_error_uuid_index` (`uuid`));
CREATE TABLE `hl7_in_queue` (`hl7_in_queue_id` int(11) NOT NULL AUTO_INCREMENT, `hl7_source` int(11) NOT NULL DEFAULT '0', `hl7_source_key` text, `hl7_data` text NOT NULL, `message_state` int(11) NOT NULL DEFAULT '0', `date_processed` datetime DEFAULT NULL, `error_msg` text, `date_created` datetime DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`hl7_in_queue_id`), UNIQUE KEY `hl7_in_queue_uuid_index` (`uuid`), KEY `hl7_source_with_queue` (`hl7_source`));
CREATE TABLE `hl7_source` (`hl7_source_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL DEFAULT '', `description` text, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`hl7_source_id`), UNIQUE KEY `hl7_source_uuid_index` (`uuid`), KEY `user_who_created_hl7_source` (`creator`));
CREATE TABLE `location` (`location_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL DEFAULT '', `description` varchar(255) DEFAULT NULL, `address1` varchar(255) DEFAULT NULL, `address2` varchar(255) DEFAULT NULL, `city_village` varchar(255) DEFAULT NULL, `state_province` varchar(255) DEFAULT NULL, `postal_code` varchar(50) DEFAULT NULL, `country` varchar(50) DEFAULT NULL, `latitude` varchar(50) DEFAULT NULL, `longitude` varchar(50) DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `county_district` varchar(255) DEFAULT NULL, `address3` varchar(255) DEFAULT NULL, `address4` varchar(255) DEFAULT NULL, `address5` varchar(255) DEFAULT NULL, `address6` varchar(255) DEFAULT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `parent_location` int(11) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`location_id`), UNIQUE KEY `location_uuid_index` (`uuid`), KEY `name_of_location` (`name`), KEY `location_retired_status` (`retired`), KEY `user_who_created_location` (`creator`), KEY `user_who_retired_location` (`retired_by`), KEY `parent_location` (`parent_location`));
CREATE TABLE `location_attribute` (`location_attribute_id` int(11) NOT NULL AUTO_INCREMENT, `location_id` int(11) NOT NULL, `attribute_type_id` int(11) NOT NULL, `value_reference` text NOT NULL, `uuid` char(38) NOT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, PRIMARY KEY (`location_attribute_id`), UNIQUE KEY `uuid` (`uuid`), KEY `location_attribute_location_fk` (`location_id`), KEY `location_attribute_attribute_type_id_fk` (`attribute_type_id`), KEY `location_attribute_creator_fk` (`creator`), KEY `location_attribute_changed_by_fk` (`changed_by`), KEY `location_attribute_voided_by_fk` (`voided_by`));
CREATE TABLE `location_attribute_type` (`location_attribute_type_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, `description` varchar(1024) DEFAULT NULL, `datatype` varchar(255) DEFAULT NULL, `datatype_config` text, `preferred_handler` varchar(255) DEFAULT NULL, `handler_config` text, `min_occurs` int(11) NOT NULL, `max_occurs` int(11) DEFAULT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`location_attribute_type_id`), UNIQUE KEY `uuid` (`uuid`), KEY `location_attribute_type_creator_fk` (`creator`), KEY `location_attribute_type_changed_by_fk` (`changed_by`), KEY `location_attribute_type_retired_by_fk` (`retired_by`));
CREATE TABLE `location_tag` (`location_tag_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(50) NOT NULL, `description` varchar(255) DEFAULT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`location_tag_id`), UNIQUE KEY `location_tag_uuid_index` (`uuid`), KEY `location_tag_creator` (`creator`), KEY `location_tag_retired_by` (`retired_by`));
CREATE TABLE `location_tag_map` (`location_id` int(11) NOT NULL, `location_tag_id` int(11) NOT NULL, PRIMARY KEY (`location_id`,`location_tag_id`), KEY `location_tag_map_tag` (`location_tag_id`));
CREATE TABLE `logic_rule_definition` (`id` int(11) NOT NULL AUTO_INCREMENT, `uuid` char(38) NOT NULL, `name` varchar(255) NOT NULL, `description` varchar(1000) DEFAULT NULL, `rule_content` varchar(2048) NOT NULL, `language` varchar(255) NOT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL DEFAULT '0002-11-30 00:00:00', `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `retired` smallint(6) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`), KEY `creator_idx` (`creator`), KEY `changed_by_idx` (`changed_by`), KEY `retired_by_idx` (`retired_by`));
CREATE TABLE `logic_rule_token` (`logic_rule_token_id` int(11) NOT NULL AUTO_INCREMENT, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL DEFAULT '0002-11-30 00:00:00', `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `token` varchar(512) NOT NULL, `class_name` varchar(512) NOT NULL, `state` varchar(512) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`logic_rule_token_id`), UNIQUE KEY `uuid` (`uuid`), KEY `token_creator` (`creator`), KEY `token_changed_by` (`changed_by`));
CREATE TABLE `logic_rule_token_tag` (`logic_rule_token_id` int(11) NOT NULL, `tag` varchar(512) NOT NULL, KEY `token_tag` (`logic_rule_token_id`));
CREATE TABLE `logic_token_registration` (`token_registration_id` int(11) NOT NULL AUTO_INCREMENT, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL DEFAULT '0002-11-30 00:00:00', `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `token` varchar(512) NOT NULL, `provider_class_name` varchar(512) NOT NULL, `provider_token` varchar(512) NOT NULL, `configuration` varchar(2000) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`token_registration_id`), UNIQUE KEY `uuid` (`uuid`), KEY `token_registration_creator` (`creator`), KEY `token_registration_changed_by` (`changed_by`));
CREATE TABLE `logic_token_registration_tag` (`token_registration_id` int(11) NOT NULL, `tag` varchar(512) NOT NULL, KEY `token_registration_tag` (`token_registration_id`));
CREATE TABLE `note` (`note_id` int(11) NOT NULL DEFAULT '0', `note_type` varchar(50) DEFAULT NULL, `patient_id` int(11) DEFAULT NULL, `obs_id` int(11) DEFAULT NULL, `encounter_id` int(11) DEFAULT NULL, `text` text NOT NULL, `priority` int(11) DEFAULT NULL, `parent` int(11) DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`note_id`), UNIQUE KEY `note_uuid_index` (`uuid`), KEY `user_who_changed_note` (`changed_by`), KEY `user_who_created_note` (`creator`), KEY `encounter_note` (`encounter_id`), KEY `obs_note` (`obs_id`), KEY `note_hierarchy` (`parent`), KEY `patient_note` (`patient_id`));
CREATE TABLE `notification_alert` (`alert_id` int(11) NOT NULL AUTO_INCREMENT, `text` varchar(512) NOT NULL, `satisfied_by_any` tinyint(1) NOT NULL DEFAULT '0', `alert_read` tinyint(1) NOT NULL DEFAULT '0', `date_to_expire` datetime DEFAULT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`alert_id`), UNIQUE KEY `notification_alert_uuid_index` (`uuid`), KEY `alert_date_to_expire_idx` (`date_to_expire`), KEY `user_who_changed_alert` (`changed_by`), KEY `alert_creator` (`creator`));
CREATE TABLE `notification_alert_recipient` (`alert_id` int(11) NOT NULL, `user_id` int(11) NOT NULL, `alert_read` tinyint(1) NOT NULL DEFAULT '0', `date_changed` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, `uuid` char(38) NOT NULL, PRIMARY KEY (`alert_id`,`user_id`), KEY `alert_read_by_user` (`user_id`));
CREATE TABLE `notification_template` (`template_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(50) DEFAULT NULL, `template` text, `subject` varchar(100) DEFAULT NULL, `sender` varchar(255) DEFAULT NULL, `recipients` varchar(512) DEFAULT NULL, `ordinal` int(11) DEFAULT '0', `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`template_id`), UNIQUE KEY `notification_template_uuid_index` (`uuid`));
CREATE TABLE `order_type` (`order_type_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL DEFAULT '', `description` varchar(255) NOT NULL DEFAULT '', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`order_type_id`), UNIQUE KEY `order_type_uuid_index` (`uuid`), KEY `order_type_retired_status` (`retired`), KEY `type_created_by` (`creator`), KEY `user_who_retired_order_type` (`retired_by`));
CREATE TABLE `orders` (`order_id` int(11) NOT NULL AUTO_INCREMENT, `order_type_id` int(11) NOT NULL DEFAULT '0', `concept_id` int(11) NOT NULL DEFAULT '0', `orderer` int(11) DEFAULT '0', `encounter_id` int(11) DEFAULT NULL, `instructions` text, `start_date` datetime DEFAULT NULL, `auto_expire_date` datetime DEFAULT NULL, `discontinued` tinyint(1) NOT NULL DEFAULT '0', `discontinued_date` datetime DEFAULT NULL, `discontinued_by` int(11) DEFAULT NULL, `discontinued_reason` int(11) DEFAULT NULL, `discontinued_reason_non_coded` varchar(255) DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `patient_id` int(11) NOT NULL, `accession_number` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, `urgency` varchar(50) NOT NULL DEFAULT 'ROUTINE', PRIMARY KEY (`order_id`), UNIQUE KEY `orders_uuid_index` (`uuid`), KEY `order_creator` (`creator`), KEY `user_who_discontinued_order` (`discontinued_by`), KEY `discontinued_because` (`discontinued_reason`), KEY `orders_in_encounter` (`encounter_id`), KEY `type_of_order` (`order_type_id`), KEY `orderer_not_drug` (`orderer`), KEY `order_for_patient` (`patient_id`), KEY `user_who_voided_order` (`voided_by`));
CREATE TABLE `patient` (`patient_id` int(11) NOT NULL, `tribe` int(11) DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, PRIMARY KEY (`patient_id`), KEY `user_who_changed_pat` (`changed_by`), KEY `user_who_created_patient` (`creator`), KEY `user_who_voided_patient` (`voided_by`));
CREATE TABLE `patient_identifier` (`patient_identifier_id` int(11) NOT NULL AUTO_INCREMENT, `patient_id` int(11) NOT NULL DEFAULT '0', `identifier` varchar(50) NOT NULL DEFAULT '', `identifier_type` int(11) NOT NULL DEFAULT '0', `preferred` tinyint(1) NOT NULL DEFAULT '0', `location_id` int(11) DEFAULT '0', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `date_changed` datetime DEFAULT NULL, `changed_by` int(11) DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`patient_identifier_id`), UNIQUE KEY `patient_identifier_uuid_index` (`uuid`), KEY `identifier_name` (`identifier`), KEY `idx_patient_identifier_patient` (`patient_id`), KEY `identifier_creator` (`creator`), KEY `defines_identifier_type` (`identifier_type`), KEY `patient_identifier_ibfk_2` (`location_id`), KEY `identifier_voider` (`voided_by`), KEY `patient_identifier_changed_by` (`changed_by`));
CREATE TABLE `patient_identifier_type` (`patient_identifier_type_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(50) NOT NULL DEFAULT '', `description` text NOT NULL, `format` varchar(255) DEFAULT NULL, `check_digit` tinyint(1) NOT NULL DEFAULT '0', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `required` tinyint(1) NOT NULL DEFAULT '0', `format_description` varchar(255) DEFAULT NULL, `validator` varchar(200) DEFAULT NULL, `location_behavior` varchar(50) DEFAULT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`patient_identifier_type_id`), UNIQUE KEY `patient_identifier_type_uuid_index` (`uuid`), KEY `patient_identifier_type_retired_status` (`retired`), KEY `type_creator` (`creator`), KEY `user_who_retired_patient_identifier_type` (`retired_by`));
CREATE TABLE `patient_program` (`patient_program_id` int(11) NOT NULL AUTO_INCREMENT, `patient_id` int(11) NOT NULL DEFAULT '0', `program_id` int(11) NOT NULL DEFAULT '0', `date_enrolled` datetime DEFAULT NULL, `date_completed` datetime DEFAULT NULL, `location_id` int(11) DEFAULT NULL, `outcome_concept_id` int(11) DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`patient_program_id`), UNIQUE KEY `patient_program_uuid_index` (`uuid`), KEY `user_who_changed` (`changed_by`), KEY `patient_program_creator` (`creator`), KEY `patient_in_program` (`patient_id`), KEY `program_for_patient` (`program_id`), KEY `user_who_voided_patient_program` (`voided_by`), KEY `patient_program_location_id` (`location_id`), KEY `patient_program_outcome_concept_id_fk` (`outcome_concept_id`));
CREATE TABLE `patient_state` (`patient_state_id` int(11) NOT NULL AUTO_INCREMENT, `patient_program_id` int(11) NOT NULL DEFAULT '0', `state` int(11) NOT NULL DEFAULT '0', `start_date` date DEFAULT NULL, `end_date` date DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`patient_state_id`), UNIQUE KEY `patient_state_uuid_index` (`uuid`), KEY `patient_state_changer` (`changed_by`), KEY `patient_state_creator` (`creator`), KEY `patient_program_for_state` (`patient_program_id`), KEY `state_for_patient` (`state`), KEY `patient_state_voider` (`voided_by`));
CREATE TABLE `person` (`person_id` int(11) NOT NULL AUTO_INCREMENT, `gender` varchar(50) DEFAULT '', `birthdate` date DEFAULT NULL, `birthdate_estimated` tinyint(1) NOT NULL DEFAULT '0', `dead` tinyint(1) NOT NULL DEFAULT '0', `death_date` datetime DEFAULT NULL, `cause_of_death` int(11) DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`person_id`), UNIQUE KEY `person_uuid_index` (`uuid`), KEY `person_birthdate` (`birthdate`), KEY `person_death_date` (`death_date`), KEY `person_died_because` (`cause_of_death`), KEY `user_who_changed_person` (`changed_by`), KEY `user_who_created_person` (`creator`), KEY `user_who_voided_person` (`voided_by`));
CREATE TABLE `person_address` (`person_address_id` int(11) NOT NULL AUTO_INCREMENT, `person_id` int(11) DEFAULT NULL, `preferred` tinyint(1) NOT NULL DEFAULT '0', `address1` varchar(255) DEFAULT NULL, `address2` varchar(255) DEFAULT NULL, `city_village` varchar(255) DEFAULT NULL, `state_province` varchar(255) DEFAULT NULL, `postal_code` varchar(50) DEFAULT NULL, `country` varchar(50) DEFAULT NULL, `latitude` varchar(50) DEFAULT NULL, `longitude` varchar(50) DEFAULT NULL, `start_date` datetime DEFAULT NULL, `end_date` datetime DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `county_district` varchar(255) DEFAULT NULL, `address3` varchar(255) DEFAULT NULL, `address4` varchar(255) DEFAULT NULL, `address5` varchar(255) DEFAULT NULL, `address6` varchar(255) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `changed_by` int(11) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`person_address_id`), UNIQUE KEY `person_address_uuid_index` (`uuid`), KEY `patient_address_creator` (`creator`), KEY `address_for_person` (`person_id`), KEY `patient_address_void` (`voided_by`), KEY `person_address_changed_by` (`changed_by`));
CREATE TABLE `person_attribute` (`person_attribute_id` int(11) NOT NULL AUTO_INCREMENT, `person_id` int(11) NOT NULL DEFAULT '0', `value` varchar(50) NOT NULL DEFAULT '', `person_attribute_type_id` int(11) NOT NULL DEFAULT '0', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`person_attribute_id`), UNIQUE KEY `person_attribute_uuid_index` (`uuid`), KEY `attribute_changer` (`changed_by`), KEY `attribute_creator` (`creator`), KEY `defines_attribute_type` (`person_attribute_type_id`), KEY `identifies_person` (`person_id`), KEY `attribute_voider` (`voided_by`));
CREATE TABLE `person_attribute_type` (`person_attribute_type_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(50) NOT NULL DEFAULT '', `description` text NOT NULL, `format` varchar(50) DEFAULT NULL, `foreign_key` int(11) DEFAULT NULL, `searchable` tinyint(1) NOT NULL DEFAULT '0', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `edit_privilege` varchar(50) DEFAULT NULL, `sort_weight` double DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`person_attribute_type_id`), UNIQUE KEY `person_attribute_type_uuid_index` (`uuid`), KEY `attribute_is_searchable` (`searchable`), KEY `name_of_attribute` (`name`), KEY `person_attribute_type_retired_status` (`retired`), KEY `attribute_type_changer` (`changed_by`), KEY `attribute_type_creator` (`creator`), KEY `user_who_retired_person_attribute_type` (`retired_by`), KEY `privilege_which_can_edit` (`edit_privilege`));
CREATE TABLE `person_merge_log` (`person_merge_log_id` int(11) NOT NULL AUTO_INCREMENT, `winner_person_id` int(11) NOT NULL, `loser_person_id` int(11) NOT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `merged_data` longtext NOT NULL, `uuid` char(38) NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, PRIMARY KEY (`person_merge_log_id`), UNIQUE KEY `person_merge_log_unique_uuid` (`uuid`), KEY `person_merge_log_winner` (`winner_person_id`), KEY `person_merge_log_loser` (`loser_person_id`), KEY `person_merge_log_creator` (`creator`), KEY `person_merge_log_changed_by_fk` (`changed_by`), KEY `person_merge_log_voided_by_fk` (`voided_by`));
CREATE TABLE `person_name` (`person_name_id` int(11) NOT NULL AUTO_INCREMENT, `preferred` tinyint(1) NOT NULL DEFAULT '0', `person_id` int(11) NOT NULL, `prefix` varchar(50) DEFAULT NULL, `given_name` varchar(50) DEFAULT NULL, `middle_name` varchar(50) DEFAULT NULL, `family_name_prefix` varchar(50) DEFAULT NULL, `family_name` varchar(50) DEFAULT NULL, `family_name2` varchar(50) DEFAULT NULL, `family_name_suffix` varchar(50) DEFAULT NULL, `degree` varchar(50) DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`person_name_id`), UNIQUE KEY `person_name_uuid_index` (`uuid`), KEY `first_name` (`given_name`), KEY `last_name` (`family_name`), KEY `middle_name` (`middle_name`), KEY `family_name2` (`family_name2`), KEY `user_who_made_name` (`creator`), KEY `name_for_person` (`person_id`), KEY `user_who_voided_name` (`voided_by`));
CREATE TABLE `privilege` (`privilege` varchar(50) NOT NULL DEFAULT '', `description` varchar(250) NOT NULL DEFAULT '', `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`privilege`), UNIQUE KEY `privilege_uuid_index` (`uuid`));
CREATE TABLE `program` (`program_id` int(11) NOT NULL AUTO_INCREMENT, `concept_id` int(11) NOT NULL DEFAULT '0', `outcomes_concept_id` int(11) DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `name` varchar(50) NOT NULL, `description` varchar(500) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`program_id`), UNIQUE KEY `program_uuid_index` (`uuid`), KEY `user_who_changed_program` (`changed_by`), KEY `program_concept` (`concept_id`), KEY `program_creator` (`creator`), KEY `program_outcomes_concept_id_fk` (`outcomes_concept_id`));
CREATE TABLE `program_workflow` (`program_workflow_id` int(11) NOT NULL AUTO_INCREMENT, `program_id` int(11) NOT NULL DEFAULT '0', `concept_id` int(11) NOT NULL DEFAULT '0', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`program_workflow_id`), UNIQUE KEY `program_workflow_uuid_index` (`uuid`), KEY `workflow_changed_by` (`changed_by`), KEY `workflow_concept` (`concept_id`), KEY `workflow_creator` (`creator`), KEY `program_for_workflow` (`program_id`));
CREATE TABLE `program_workflow_state` (`program_workflow_state_id` int(11) NOT NULL AUTO_INCREMENT, `program_workflow_id` int(11) NOT NULL DEFAULT '0', `concept_id` int(11) NOT NULL DEFAULT '0', `initial` tinyint(1) NOT NULL DEFAULT '0', `terminal` tinyint(1) NOT NULL DEFAULT '0', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`program_workflow_state_id`), UNIQUE KEY `program_workflow_state_uuid_index` (`uuid`), KEY `state_changed_by` (`changed_by`), KEY `state_concept` (`concept_id`), KEY `state_creator` (`creator`), KEY `workflow_for_state` (`program_workflow_id`));
CREATE TABLE `provider` (`provider_id` int(11) NOT NULL AUTO_INCREMENT, `person_id` int(11) DEFAULT NULL, `name` varchar(255) DEFAULT NULL, `identifier` varchar(255) DEFAULT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`provider_id`), UNIQUE KEY `uuid` (`uuid`), KEY `provider_changed_by_fk` (`changed_by`), KEY `provider_person_id_fk` (`person_id`), KEY `provider_retired_by_fk` (`retired_by`), KEY `provider_creator_fk` (`creator`));
CREATE TABLE `provider_attribute` (`provider_attribute_id` int(11) NOT NULL AUTO_INCREMENT, `provider_id` int(11) NOT NULL, `attribute_type_id` int(11) NOT NULL, `value_reference` text NOT NULL, `uuid` char(38) NOT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, PRIMARY KEY (`provider_attribute_id`), UNIQUE KEY `uuid` (`uuid`), KEY `provider_attribute_provider_fk` (`provider_id`), KEY `provider_attribute_attribute_type_id_fk` (`attribute_type_id`), KEY `provider_attribute_creator_fk` (`creator`), KEY `provider_attribute_changed_by_fk` (`changed_by`), KEY `provider_attribute_voided_by_fk` (`voided_by`));
CREATE TABLE `provider_attribute_type` (`provider_attribute_type_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, `description` varchar(1024) DEFAULT NULL, `datatype` varchar(255) DEFAULT NULL, `datatype_config` text, `preferred_handler` varchar(255) DEFAULT NULL, `handler_config` text, `min_occurs` int(11) NOT NULL, `max_occurs` int(11) DEFAULT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`provider_attribute_type_id`), UNIQUE KEY `uuid` (`uuid`), KEY `provider_attribute_type_creator_fk` (`creator`), KEY `provider_attribute_type_changed_by_fk` (`changed_by`), KEY `provider_attribute_type_retired_by_fk` (`retired_by`));
CREATE TABLE `relationship` (`relationship_id` int(11) NOT NULL AUTO_INCREMENT, `person_a` int(11) NOT NULL, `relationship` int(11) NOT NULL DEFAULT '0', `person_b` int(11) NOT NULL, `start_date` datetime DEFAULT NULL, `end_date` datetime DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `date_changed` datetime DEFAULT NULL, `changed_by` int(11) DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`relationship_id`), UNIQUE KEY `relationship_uuid_index` (`uuid`), KEY `relation_creator` (`creator`), KEY `person_a_is_person` (`person_a`), KEY `person_b_is_person` (`person_b`), KEY `relationship_type_id` (`relationship`), KEY `relation_voider` (`voided_by`), KEY `relationship_changed_by` (`changed_by`));
CREATE TABLE `relationship_type` (`relationship_type_id` int(11) NOT NULL AUTO_INCREMENT, `a_is_to_b` varchar(50) NOT NULL, `b_is_to_a` varchar(50) NOT NULL, `preferred` tinyint(1) NOT NULL DEFAULT '0', `weight` int(11) NOT NULL DEFAULT '0', `description` varchar(255) NOT NULL DEFAULT '', `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`relationship_type_id`), UNIQUE KEY `relationship_type_uuid_index` (`uuid`), KEY `user_who_created_rel` (`creator`), KEY `user_who_retired_relationship_type` (`retired_by`));
CREATE TABLE `role` (`role` varchar(50) NOT NULL DEFAULT '', `description` varchar(255) NOT NULL DEFAULT '', `uuid` char(38) DEFAULT NULL, PRIMARY KEY (`role`), UNIQUE KEY `role_uuid_index` (`uuid`));
CREATE TABLE `role_privilege` (`role` varchar(50) NOT NULL DEFAULT '', `privilege` varchar(50) NOT NULL DEFAULT '', PRIMARY KEY (`privilege`,`role`), KEY `role_privilege_to_role` (`role`));
CREATE TABLE `role_role` (`parent_role` varchar(50) NOT NULL DEFAULT '', `child_role` varchar(50) NOT NULL DEFAULT '', PRIMARY KEY (`parent_role`,`child_role`), KEY `inherited_role` (`child_role`));
CREATE TABLE `scheduler_task_config` (`task_config_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, `description` varchar(1024) DEFAULT NULL, `schedulable_class` text, `start_time` datetime DEFAULT NULL, `start_time_pattern` varchar(50) DEFAULT NULL, `repeat_interval` int(11) NOT NULL DEFAULT '0', `start_on_startup` tinyint(1) NOT NULL DEFAULT '0', `started` tinyint(1) NOT NULL DEFAULT '0', `created_by` int(11) DEFAULT '0', `date_created` datetime DEFAULT '2005-01-01 00:00:00', `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `last_execution_time` datetime DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`task_config_id`), UNIQUE KEY `scheduler_task_config_uuid_index` (`uuid`), KEY `scheduler_changer` (`changed_by`), KEY `scheduler_creator` (`created_by`));
CREATE TABLE `scheduler_task_config_property` (`task_config_property_id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, `value` text, `task_config_id` int(11) DEFAULT NULL, PRIMARY KEY (`task_config_property_id`), KEY `task_config_for_property` (`task_config_id`));
CREATE TABLE `test_order` (`order_id` int(11) NOT NULL, `specimen_source` int(11) DEFAULT NULL, `laterality` varchar(20) DEFAULT NULL, `clinical_history` text, PRIMARY KEY (`order_id`), KEY `test_order_specimen_source_fk` (`specimen_source`));
CREATE TABLE `user_property` (`user_id` int(11) NOT NULL DEFAULT '0', `property` varchar(100) NOT NULL DEFAULT '', `property_value` varchar(255) NOT NULL DEFAULT '', PRIMARY KEY (`user_id`,`property`));
CREATE TABLE `user_role` (`user_id` int(11) NOT NULL DEFAULT '0', `role` varchar(50) NOT NULL DEFAULT '', PRIMARY KEY (`role`,`user_id`), KEY `user_role_to_users` (`user_id`));
CREATE TABLE `users` (`user_id` int(11) NOT NULL, `system_id` varchar(50) NOT NULL DEFAULT '', `username` varchar(50) DEFAULT NULL, `password` varchar(128) DEFAULT NULL, `salt` varchar(128) DEFAULT NULL, `secret_question` varchar(255) DEFAULT NULL, `secret_answer` varchar(255) DEFAULT NULL, `creator` int(11) NOT NULL DEFAULT '0', `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `person_id` int(11) NOT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`user_id`), KEY `user_who_changed_user` (`changed_by`), KEY `user_creator` (`creator`), KEY `user_who_retired_this_user` (`retired_by`), KEY `person_id_for_user` (`person_id`));
CREATE TABLE `visit` (`visit_id` int(11) NOT NULL, `patient_id` int(11) NOT NULL, `visit_type_id` int(11) NOT NULL, `date_started` datetime NOT NULL, `date_stopped` datetime DEFAULT NULL, `indication_concept_id` int(11) DEFAULT NULL, `location_id` int(11) DEFAULT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`visit_id`), UNIQUE KEY `uuid` (`uuid`), KEY `visit_patient_index` (`patient_id`), KEY `visit_type_fk` (`visit_type_id`), KEY `visit_location_fk` (`location_id`), KEY `visit_creator_fk` (`creator`), KEY `visit_voided_by_fk` (`voided_by`), KEY `visit_changed_by_fk` (`changed_by`), KEY `visit_indication_concept_fk` (`indication_concept_id`));
CREATE TABLE `visit_attribute` (`visit_attribute_id` int(11) NOT NULL, `visit_id` int(11) NOT NULL, `attribute_type_id` int(11) NOT NULL, `value_reference` text NOT NULL, `uuid` char(38) NOT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `voided` tinyint(1) NOT NULL DEFAULT '0', `voided_by` int(11) DEFAULT NULL, `date_voided` datetime DEFAULT NULL, `void_reason` varchar(255) DEFAULT NULL, PRIMARY KEY (`visit_attribute_id`), UNIQUE KEY `uuid` (`uuid`), KEY `visit_attribute_visit_fk` (`visit_id`), KEY `visit_attribute_attribute_type_id_fk` (`attribute_type_id`), KEY `visit_attribute_creator_fk` (`creator`), KEY `visit_attribute_changed_by_fk` (`changed_by`), KEY `visit_attribute_voided_by_fk` (`voided_by`));
CREATE TABLE `visit_attribute_type` (`visit_attribute_type_id` int(11) NOT NULL, `name` varchar(255) NOT NULL, `description` varchar(1024) DEFAULT NULL, `datatype` varchar(255) DEFAULT NULL, `datatype_config` text, `preferred_handler` varchar(255) DEFAULT NULL, `handler_config` text, `min_occurs` int(11) NOT NULL, `max_occurs` int(11) DEFAULT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`visit_attribute_type_id`), UNIQUE KEY `uuid` (`uuid`), KEY `visit_attribute_type_creator_fk` (`creator`), KEY `visit_attribute_type_changed_by_fk` (`changed_by`), KEY `visit_attribute_type_retired_by_fk` (`retired_by`));
CREATE TABLE `visit_type` (`visit_type_id` int(11) NOT NULL, `name` varchar(255) NOT NULL, `description` varchar(1024) DEFAULT NULL, `creator` int(11) NOT NULL, `date_created` datetime NOT NULL, `changed_by` int(11) DEFAULT NULL, `date_changed` datetime DEFAULT NULL, `retired` tinyint(1) NOT NULL DEFAULT '0', `retired_by` int(11) DEFAULT NULL, `date_retired` datetime DEFAULT NULL, `retire_reason` varchar(255) DEFAULT NULL, `uuid` char(38) NOT NULL, PRIMARY KEY (`visit_type_id`), UNIQUE KEY `uuid` (`uuid`), KEY `visit_type_creator` (`creator`), KEY `visit_type_changed_by` (`changed_by`), KEY `visit_type_retired_by` (`retired_by`));
