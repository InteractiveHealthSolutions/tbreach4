<!-- Copyright(C) 2015 Interactive Health Solutions, Pvt. Ltd.

This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as
published by the Free Software Foundation; either version 3 of the License (GPLv3), or any later version.
This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

See the GNU General Public License for more details. You should have received a copy of the GNU General Public License along with this program; if not, write to the Interactive Health Solutions, info@ihsinformatics.com
You can also access the license on the internet at the address: http://www.gnu.org/licenses/gpl-3.0.html

Interactive Health Solutions, hereby disclaims all copyright interest in this program written by the contributors.

Contributors: Tahira Niazi -->
<htmlform>
	<!-- Autogenerated example form  (template from 01-Nov-2010 -->
	<macros>
		paperFormId = (Fill this in)
		headerColor =#009d8e
		fontOnHeaderColor = white
	</macros>

	<style>
		.section {
			border: 1px solid $headerColor;
			padding: 2px;
			text-align: left;
			margin-bottom: 1em;
		}
		.sectionHeader {
			background-color: $headerColor;
			color: $fontOnHeaderColor;
			display: block;
			padding: 2px;
			font-weight: bold;
		}
		table.baseline-aligned td {
			vertical-align: baseline;
		}
	</style>

	<span style="float:right">Paper Form ID: $paperFormId</span>
	<h2>Xpert Order Form (v1.0)</h2>

	<section headerLabel="1. Encounter Details">
		<table class="baseline-aligned">
			<tr>
				<td>Date:</td>
				<td><encounterDate default="today"/></td>
			</tr>
			<tr>
				<td>Location:</td>
				<td><encounterLocation/></td>
			</tr>
			<tr>
				<td>Provider:</td>
				<td><encounterProvider/></td>
			</tr>
		</table>
	</section>

	<section headerLabel="2. Xpert MTB/RIF Test Order Information">
		<div>
                        <p>
				<lookup expression="fn.getConcept('162').description"/><br/>
				<obs conceptId="162" id="specimen_type" answerConceptIds="160,161" defaultValue="160"/>
			</p>
                <div id="spec_quality_div">
                       <p>
				<lookup expression="fn.getConcept('111').description"/><br/>
				<obs conceptId="111" id="specimen_quality" answerConceptIds="36,37,38,3" />
		       </p>
                </div>

            <div id="specimen_location_div">
                <p>
					<lookup expression="fn.getConcept('167').description"/><br/>
					<obs conceptId="167" id="specimen_location" answerConceptIds="163,164,165,166" defaultValue="163"/>
				</p>
				<div id="other_specimen_location_div">
				<p>
					<lookup expression="fn.getConcept('166').description"/><br/>
					<obs conceptId="166" id="other_specimen_location" />
				</p>
				</div>
            </div>
                </div>
	</section>

	<submit/>
<script type="text/javascript">
		if(jQuery) {
			$j(document).ready(function() {
				$j("#specimen_type").change(function(){
					var specimenLocationDiv = $j("#specimen_location_div");
					var otherSpecimenLocationDiv = $j("#other_specimen_location_div");
					var specimenQualityDiv =$j("#spec_quality_div");
					var specimentTypeValue = getValue('specimen_type.value');
					if(specimentTypeValue == 161){
						specimenLocationDiv.show();
						specimenQualityDiv.hide();
					}
					else {
						specimenLocationDiv.hide();
						specimenQualityDiv.show();
					}
				});
				$j("#specimen_type").change();
				
				$j("#specimen_location").change(function(){
					var otherSpecimenLocationDiv = $j("#other_specimen_location_div");
					var specimentLocationValue = getValue('specimen_location.value');
					if(specimentLocationValue == 166){
						otherSpecimenLocationDiv.show();
					}
					else {
						otherSpecimenLocationDiv.hide();
					}
				});
				$j("#specimen_location").change();
			});
		}
	</script>

</htmlform>