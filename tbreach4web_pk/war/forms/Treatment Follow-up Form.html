<htmlform>
	<!-- Autogenerated example form  (template from 01-Nov-2010 -->
	<macros>
		paperFormId = (Fill this in)
		headerColor =#009d8e
		fontOnHeaderColor = white
	</macros>

	<style>
		.section {
			border: 1px solid $headerColor;
			padding: 2px;
			text-align: left;
			margin-bottom: 1em;
		}
		.sectionHeader {
			background-color: $headerColor;
			color: $fontOnHeaderColor;
			display: block;
			padding: 2px;
			font-weight: bold;
		}
		table.baseline-aligned td {
			vertical-align: baseline;
		}
	</style>

	<span style="float:right">Paper Form ID: $paperFormId</span>
	<h2>Treatment Follow-up Form (v1.0)</h2>

	<section headerLabel="1. Encounter Details">
		<table class="baseline-aligned">
			<tr>
				<td>Form Date:</td>
				<td><encounterDate default="today"/></td>
			</tr>
			<tr>
				<td>Location:</td>
				<td><encounterLocation/></td>
			</tr>
			<tr>
				<td>Provider:</td>
				<td><encounterProvider/></td>
			</tr>
		</table>
	</section>

 <section headerLabel="2. Treatment Follow-up">
		<div>
                        <p>
                              Registration Date:
                           <b>   <span id="date-value"> 
                                    <lookup complexExpression="#foreach($encounter in $fn.allEncounters(null)) #if($encounter.encounterType.id == 22) $encounter.encounterDatetime              #end #end" />
                          </span> </b>
                       </p>
			<p>
				<lookup expression="fn.getConcept('590').description"/>:
			        <b><lookup expression="fn.latestObs(590).valueCoded.name"/></b>
			</p>
                         <p>
				<lookup expression="fn.getConcept('297').description"/>:
			         <b><lookup expression="fn.latestObs(297).valueCoded.name"/></b>
			</p>
                         <p>
				<lookup expression="fn.getConcept('290').description"/>:
				<b><lookup expression="fn.latestObs(290).valueCoded.name"/></b>
			</p>
		</div>
	</section>

	<section headerLabel="2. Treatment Follow-up Information">
		<div>
                        <p>
                                Month 2 Smear Result<br/>
                                <obs conceptId="605" id="month_two_smear" defaultValue="208"/>
                        </p>
                        <p>
                                Month 3 Smear Result<br/>
                                <obs conceptId="606" id="month_three_smear" defaultValue="208"/>
                        </p>
                        <p>
                                Month 5 Smear Result<br/>
                                <obs conceptId="607" id="month_five_smear" defaultValue="208"/>
                        </p>
                        <p>
                                Month 6 Smear Result<br/>
                                <obs conceptId="608" id="month_six_smear" defaultValue="208"/>
                        </p>
                        <p>
                                Month 8 Smear Result<br/>
                                <obs conceptId="609" id="month_eight_smear" defaultValue="208"/>
                        </p>
<!--                         <p> -->
<!--                                 Month 9 Smear Result<br/>  create in local instance of openmrs -->
<!--                                 <obs conceptId="658" id="month_nine_smear" defaultValue="208"/> -->
<!--                         </p> -->
<!--                         <p> -->
<!--                                 Month 10 Smear Result<br/> create in local instance of openmrs -->
<!--                                 <obs conceptId="659" id="month_ten_smear" defaultValue="208"/> -->
<!--                         </p> -->
<!--                         <p> -->
<!--                                 Month 11 Smear Result<br/> create in local instance of openmrs -->
<!--                                 <obs conceptId="660" id="month_eleven_smear" defaultValue="208"/> -->
<!--                         </p> -->
<!--                         <p> -->
<!--                                 Month 12 Smear Result<br/> create in local instance of openmrs -->
<!--                                 <obs conceptId="661" id="month_twelve_smear" defaultValue="208"/> -->
<!--                         </p> -->
                        <ifMode mode="ENTER">
                        <p>
                                Month of Treatment<br/>
                                <select id="treatment_month_options">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                </select>
                        </p>
                        </ifMode>
                        <div id="treatment_month_div">
                        <p>
                                <lookup expression="fn.getConcept('283').description"/><br/>
                                <obs conceptId="283" id="treatment_month" />
                        </p>
                        </div>
                        <p>
                                <lookup expression="fn.getConcept('22').description"/><br/>
                                <obs conceptId="22" id="patient_weight"/>
                        </p>
                        <p>
                                <lookup expression="fn.getConcept('611').description"/><br/>
                                <obs conceptId="611" id="treatment_plan" defaultValue="300"/>
                        </p>
                        <p>
                                <lookup expression="fn.getConcept('614').description"/><br/>
                                <obs conceptId="614" id="regimen" defaultValue="612"/>
                        </p>
                        <p>
                                <lookup expression="fn.getConcept('616').description"/><br/>
                               <obs conceptId="616" id="fixed_dose_tablet_regimen" defaultValue="615" answerConceptIds="615,617,618,619,620,621" answerLabels="1, 1.5 , 2, 3, 4, 5"/>
                        </p>
                        <p>
                                Have you had cough in the last 2 weeks?<br/>
                                <obs conceptId="7" id="cough" defaultValue="2"/>
                        </p>
                        <p>
                                <lookup expression="fn.getConcept('80').description"/><br/>
                                <obs conceptId="80" id="fever" defaultValue="2"/>
                        </p>
                        <p>
                                <lookup expression="fn.getConcept('81').description"/><br/>
                                <obs conceptId="81" id="night_sweats" defaultValue="2"/>
                        </p>
                        <p>
                                <lookup expression="fn.getConcept('82').description"/><br/>
                                <obs conceptId="82" id="weight_loss" defaultValue="2"/>
                        </p>
                        <p>
                                <lookup expression="fn.getConcept('624').description"/><br/>
                                <obs conceptId="624" id="complaint" defaultValue="1" answerConceptIds="2,1" style="radio"/>
                        </p>
                        <div id="complaint_detail_div">
                        <p>
                                <lookup expression="fn.getConcept('625').description"/><br/>
                                <obs conceptId="625" id="complaint_detail"/>
                        </p>
                        </div>

                </div>
	</section>

	<submit/>

        <script>
		if(jQuery) {
		$j(document).ready(function() {
			// if CT Scan is "Yes", show CT Scan Area 
			$j("#complaint").change(function() {
				var complaintDetailDiv = $j("#complaint_detail_div");
				var complaintValue = getValue('complaint.value');
				if (complaintValue == 2) {
					complaintDetailDiv.show();
				}
				else {
					complaintDetailDiv.hide();
				}
			});
			$j("#complaint").change();
                        
                        // hidden treatment_month field
                        var hiddenTreatmentMonthDiv = $j("#treatment_month_div");
                        <ifMode mode="ENTER">
                                  hiddenTreatmentMonthDiv.hide();
                        </ifMode>

                        $j("#treatment_month_options").change(function() {
                               var element = document.getElementById("treatment_month_options");
                               var selectedValue = element.options[element.selectedIndex].text;
                               setValue('treatment_month.value', selectedValue);
                        });
                        $j("#treatment_month_options").change();
		});
	}
	</script>

</htmlform>