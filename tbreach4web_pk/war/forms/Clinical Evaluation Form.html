<htmlform>
	<br/>
	<!-- Autogenerated example form  (template from 01-Nov-2010 -->
	<macros>
		paperFormId = (Fill this in)
		headerColor =#009d8e
		fontOnHeaderColor = white
	</macros>
	<style>
		.section {
			border: 1px solid $headerColor;
			padding: 2px;
			text-align: left;
			margin-bottom: 1em;
		}
		.sectionHeader {
			background-color: $headerColor;
			color: $fontOnHeaderColor;
			display: block;
			padding: 2px;
			font-weight: bold;
		}
		table.baseline-aligned td {
			vertical-align: baseline;
		}
	</style>

	<span style="float:right">Paper Form ID: $paperFormId</span>
	<h2>Clinical Evaluation Form (v1.0)</h2>
	<section headerLabel="1. Encounter Details">
		<table class="baseline-aligned">
			<tr>
				<td>Form Date:</td>
				<td>
					<encounterDate default="today"/>
				</td>
			</tr>
			<tr>
				<td>Location:</td>
				<td>
					<encounterLocation default="1"/>
				</td>
			</tr>
			<tr>
				<td>Provider:</td>
				<td>
					<encounterProvider default="currentUser"/>
				</td>
			</tr>
		</table>
	</section>

	<section headerLabel="2. Patient Information">
		<div>
			<p>
				<lookup expression="fn.getConcept('22').description"/><br/>
				<obs conceptId="22" id="weight"/>
			</p>
			<p>
				Treatment Start Status:<br/>
				Tuberculosis: <lookup expression="fn.latestObs(271).valueCoded.name"/><br/>
				Diabetes: <lookup expression="fn.latestObs(388).valueCoded.name"/>
			</p>
		</div>
	</section>

	<section headerLabel="2. Clinical History">
		<div id="tb_div">
			<p>
				<lookup expression="fn.getConcept('7').description"/><br/>
				<obs conceptId="7" id="cough" defaultValue="2"/>
			</p>
			<div id="haemoptysis_div">
				<p>
					<lookup expression="fn.getConcept('202').description"/><br/>
					<obs conceptId="202" id="haemoptysis" defaultValue="2"/>
				</p>
			</div>
			<p>
				<lookup expression="fn.getConcept('80').description"/><br/>
				<obs conceptId="80" id="fever" defaultValue="2"/>
			</p>
			<p>
				<lookup expression="fn.getConcept('81').description"/><br/>
				<obs conceptId="81" id="night_sweats" defaultValue="2"/>
			</p>
			<p>
				<lookup expression="fn.getConcept('83').description"/><br/>
				<obs conceptId="83" id="tb_fatigue" defaultValue="2"/>
			</p>
			<p>
				<lookup expression="fn.getConcept('25').description"/><br/>
				<obs conceptId="25" id="breathing_shortness" defaultValue="2"/>
			</p>
			<p>
				<lookup expression="fn.getConcept('84').description"/><br/>
				<obs conceptId="84" id="appetite_loss" defaultValue="2"/>
			</p>
		</div>
		<div id="diabetes_div">
			<p>
				<lookup expression="fn.getConcept('357').description"/><br/>
				<obs conceptId="357" id="numbness" defaultValue="2"/>
			</p>
			<p>
				<lookup expression="fn.getConcept('83').description"/><br/>
				<obs conceptId="83" id="dm_fatigue" defaultValue="2"/>
			</p>
			<p>
				<lookup expression="fn.getConcept('358').description"/><br/>
				<obs conceptId="358" id="numbness" defaultValue="2"/>
			</p>
			<p>
				<lookup expression="fn.getConcept('359').description"/><br/>
				<obs conceptId="359" id="vision_difficulty" defaultValue="2"/>
			</p>
			<p>
				<lookup expression="fn.getConcept('360').description"/><br/>
				<obs conceptId="360" id="delayed_healing" defaultValue="2"/>
			</p>
			<p>
				<lookup expression="fn.getConcept('389').description"/><br/>
				<obs conceptId="389" id="refused_evaluation" answerConceptIds="1,2" defaultValue="2"/>
			</p>
		</div>
	</section>
	
	<div id="diabetes_exam_div">
		<section headerLabel="3. Clinical Exam">
			<p>
				<lookup expression="fn.getConcept('368').description"/><br/>
				<obs conceptId="368" id="left_foot" defaultValue="361"/>				
			</p>
			<p>
				<lookup expression="fn.getConcept('369').description"/><br/>
				<obs conceptId="369" id="left_foot" defaultValue="361"/>				
			</p>
			<p>
				<lookup expression="fn.getConcept('372').description"/><br/>
				<obs conceptId="372" id="left_ankle" defaultValue="370"/>				
			</p>
			<p>
				<lookup expression="fn.getConcept('373').description"/><br/>
				<obs conceptId="373" id="right_ankle" defaultValue="370"/>				
			</p>
			<p>
				<lookup expression="fn.getConcept('374').description"/><br/>
				<obs conceptId="374" id="left_pedis" defaultValue="370"/>				
			</p>
			<p>
				<lookup expression="fn.getConcept('375').description"/><br/>
				<obs conceptId="375" id="right_pedis" defaultValue="370"/>				
			</p>
			<p>
				<lookup expression="fn.getConcept('376').description"/><br/>
				<obs conceptId="376" id="monofilament" defaultValue="370"/>				
			</p>
			<p>
				<lookup expression="fn.getConcept('379').description"/><br/>
				<obs conceptId="379" id="glucose_monitoring" defaultValue="377"/>				
			</p>
			<p>
				<lookup expression="fn.getConcept('79').description"/><br/>
				<obs conceptId="79" id="remarks" size="100"/>				
			</p>
		</section>
	</div>
	<submit/>
	
	<script type="text/javascript">
		if(jQuery) {
		$j(document).ready(function() {
			var tb = "<lookup complexExpression="$fn.latestObs(271).valueCoded"/>";
			var diabetes = "<lookup complexExpression="$fn.latestObs(388).valueCoded"/>";
			if (tb != 1) {
				$j("#tb_div").hide();
			}
			if (diabetes != 1) {
				$j("#diabetes_div").hide();
				$j("#diabetes_exam_div").hide();
			}
			// If disease is TB, then disable Diabetes sections, and vice versa
			$j("#refused_evaluation").change(function() {
				var diabetesExamDiv = $j("#diabetes_exam_div");
				var refusedValue = getValue('refused_evaluation.value');
				if (refusedValue == 1 ) {
					diabetesExamDiv.hide();
				}
				else {
					diabetesExamDiv.show();
				}
			});
			// $j("#refused_evaluation").change(); // Commented so that the section is not shown at all when there is no diabetes 
			// Disable Haemoptysis if cough is not Yes
			$j("#cough").change(function() {
				var haemoptysisDiv = $j("#haemoptysis_div");
				var coughValue = getValue('cough.value');
				if (coughValue == 1) {
					haemoptysisDiv.show();
				}
				else {
					haemoptysisDiv.hide();
				}
			});
			$j("#cough").change();
		});
	}
	</script>
</htmlform>